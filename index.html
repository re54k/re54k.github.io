<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <style>
        table, th, td {
            border: 1px solid #ddd;
        }
        table {
            text-align: center;
            border-collapse: collapse;
        }
        table tbody:nth-child(even) {
            background-color: #eee;
        }
        th, td {
            padding:8px 20px;
        }
        tfoot tr {
            background-color: lavender;
        }
        .red {
            color: red;
        }
        span {
            display: inline-block;
            position: relative;
            border: 1px solid lightsteelblue;
            border-radius: 50%;
            color: cornflowerblue;
            left: 4px;
            top: -7px;
            width: 12px;
            height: 12px;
            line-height: 12px;
            font-size: 12px;
        }
    </style>
    <title>猜比分赢饭局</title>
</head>
<body>
<h1>Hello 饭局</h1>
<table>
    <thead>
    <tr>
        <th>球队</th>
        <th>时间</th>
        <th>最终比分</th>
        <th>熊</th>
        <th>女包</th>
        <th>柯柯</th>
    </tr>
    </thead>

    <tbody>
    <tr>
        <th>巴西 4:3 智利</th>
        <td>6/13 04：00</td>
        <td class="red">1:1</td>
        <td>3:2</td>
        <td>3:1</td>
        <td>2:1</td>
    </tr>

    <tr>
        <th>哥伦比亚 2:0 乌拉圭</th>
        <td>6/14 00：00</td>
        <td class="red">1:0</td>
        <td>1:2</td>
        <td>2:0</td>
        <td>2:1</td>
    </tr>
    </tbody>

    <tbody>
    <tr>
        <th>荷兰 vs 墨西哥</th>
        <td>6/24 04：00</td>
        <td class="red">2:1</td>
        <td>3:1</td>
        <td>2:1</td>
        <td>2:1</td>
    </tr>
    <tr>
        <th>哥斯达黎加 vs 希腊</th>
        <td>6/24 04：00</td>
        <td class="red">1:1</td>
        <td>2:0</td>
        <td>0:0</td>
        <td>1:0</td>
    </tr>
    </tbody>

    <tbody>
    <tr>
        <th>法国 vs 尼日利亚</th>
        <td>6/24 04：00</td>
        <td class="red">-:-</td>
        <td>:</td>
        <td>:</td>
        <td>:</td>
    </tr>
    <tr>
        <th>德国 vs 阿尔及利亚</th>
        <td>6/24 04：00</td>
        <td class="red">-:-</td>
        <td>:</td>
        <td>:</td>
        <td>:</td>
    </tr>
    </tbody>

    <!--<tbody>
    <tr>
        <th>俄罗斯 vs 韩国</th>
        <td>6/24 04：00</td>
        <td class="red">-:-</td>
        <td>:</td>
        <td>:</td>
        <td>:</td>
    </tr>
    <tr>
        <th>俄罗斯 vs 韩国</th>
        <td>6/24 04：00</td>
        <td class="red">-:-</td>
        <td>:</td>
        <td>:</td>
        <td>:</td>
    </tr>
    </tbody>-->

    <tfoot>
        <th>当前得分</th>
        <th>-</th>
        <th>-</th>
        <th></th>
        <th></th>
        <th></th>
    </tfoot>
</table>

<script type="text/javascript" src="http://img3.cache.netease.com/apps/galaxy/js/lib/jquery-1.10.2.min.js"></script>
<script type="text/javascript">
    !function ($) {
        var scores = [0, 3, 2, 1];

        $('tbody tr').each(function() {
            var tr = $(this),
                td0 = tr.find('td:nth-child(3)'),
                tds = tr.find('td:nth-child(4), td:nth-child(5), td:nth-child(6)'),
                score = td0.text(),
                count = 0,
                vd;

            if ( score == '-:-' ) {
                return;
            }

            vd = getVD(score);

            tds.each(function() {
                // console.log(getVD($(this).text()), $(this).text(), vd)
                if ( getVD($(this).text()) == vd ) {
                    ++count;
                }
            }).each(function() {
                // console.log(count);
                var s = $(this).text(),
                    grade = 0;
                if ( s == score ) {
                    grade = 3;
                } else if ( getVD(s) == vd ) {
                    grade = scores[count];
                }
                $(this).append('<span>' + grade + '</span>');
            });
        });

        for ( var i = 4; i < 7; i++ ) {
            var num = 0;
            $('tbody tr td:nth-child(' + i + ') span').each(function() {
                num += parseInt($(this).text());
            });
            $('tfoot th:nth-child(' + i + ')').text(num);
        }

        function getVD(score) {
            var x = score.split(':'),
                a = parseInt(x[0]),
                b = parseInt(x[1]),
                vd;

            if ( a == b ) {
                vd = 0;
            } else {
                vd = ( a - b ) / Math.abs( a - b );
            }
            return vd;
        }
    }(jQuery);
</script>
</body>
</html>